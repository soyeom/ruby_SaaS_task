# 画面仕様書

## 1. ログイン画面

### ■ 画面構成
- ロゴ・タイトルエリア  
- ログインフォーム  
  - ログインID入力  
  - パスワード入力  
- ログインボタン  
- サインアップ画面へのリンク  

---

### ■ 入力項目

| 項目名   | 必須 | 説明 |
|--------|------|------|
| login_id | ○ | ユーザー識別用ID |
| password | ○ | パスワード（マスク表示） |

---

### ■ エラー処理

| 状況 | 表示内容 |
|------|--------|
| 未入力 | `login_id と password は必須です。` |
| 認証失敗 | `ログインIDまたはパスワードが正しくありません。` |
| その他エラー | `ログインに失敗しました。` |

---

## 2. サインアップ画面

### ■ 画面構成
- ユーザー登録フォーム  
  - ログインID  
  - パスワード  
  - パスワード確認  
- 登録ボタン  
- ログイン画面へのリンク  

---

### ■ 入力項目

| 項目名 | 必須 | 説明 |
|--------|------|------|
| login_id | ○ | 一意 |
| password | ○ | パスワード |
| password_conf | ○ | 確認用パスワード |

---

### ■ エラー処理

| 状況 | 表示内容 |
|------|--------|
| 未入力 | `login_id, password, password_conf は必須です。` |
| バリデーションエラー | APIのエラーメッセージを表示 |

---

## 3. ワークスペース一覧画面

### ■ 画面構成
- ヘッダーエリア  
- ワークスペース作成フォーム  
  - ワークスペース名入力  
  - 作成ボタン  
- ワークスペース一覧  
  - 所属ワークスペースをリスト表示  
  - クリックで詳細画面へ遷移  

---

### ■ 入力項目

| 項目名 | 必須 | 説明 |
|--------|------|------|
| name | ○ | 新しく作成するワークスペース名 |

---

### ■ エラー処理

| 状況 | 表示内容 |
|------|--------|
| 未入力 | `ワークスペース名は必須です。` |
| 作成失敗 | `ワークスペースの作成に失敗しました。` |
| 一覧取得失敗 | `ワークスペース一覧の取得に失敗しました。` |
| 未認証 | ログイン画面に遷移 |

---

## 4. タスク作成画面

### ■ 画面構成
- パンくず：`タスク / 新規作成`  
- タスク入力フォーム  
  - タイトル入力  
  - 説明入力  
  - ステータス選択（未着手 / 進行中 / 完了）  
  - カテゴリ入力  
  - 担当者選択（ワークスペースメンバーから選択）  
- 作成ボタン  
- 戻るボタン（ワークスペース詳細へ戻る）  

---

### ■ 入力項目

| 項目名      | 必須 | 説明 |
|-------------|------|------|
| title       | ○ | タスクタイトル |
| description | × | タスクの詳細説明 |
| status      | × | タスクの状態（todo / doing / done） |
| category    | × | カテゴリ名 |
| assignee_id | × | 担当者のユーザーID |

---

### ■ エラー処理

| 状況 | 表示内容 |
|------|--------|
| title 未入力 | `タスクタイトルは必須です。` |
| バリデーションエラー | API の `details` を `/` 区切りで表示 |
| 作成失敗 | `タスクの作成に失敗しました。` |

---

## 5. ワークスペース詳細画面

### ■ 画面構成
- ワークスペース名編集エリア  
- タスク一覧エリア  
- タスクフィルターエリア  
- メンバー管理エリア  
- タスク進捗表示エリア  
- 操作ボタンエリア  
  - 更新ボタン  
  - 削除ボタン  
  - 戻るボタン  

---

### ■ 入力項目

| 項目名 | 必須 | 説明 |
|------|------|------|
| name | ○ | ワークスペース名 |
| status | × | タスクステータス絞り込み |
| assignee_id | × | 担当ユーザーID |
| category | × | カテゴリ名フィルター |

---

### ■ エラー処理

| 状況 | 表示内容 |
|------|--------|
| ワークスペース取得失敗 | `ワークスペースの取得に失敗しました。` |
| 更新失敗 | `ワークスペースの更新に失敗しました。` |
| 削除失敗 | `ワークスペースの削除に失敗しました。` |
| タスク取得失敗 | `タスク一覧の取得に失敗しました。` |
| 未認証 | ログイン画面に遷移 |

---

## 5.1 メンバー管理エリア

### ■ 画面構成
- メンバー一覧エリア  
  - login_id 表示  
  - 権限（owner / member）表示  
  - 各メンバー横に削除ボタン（×）表示  
- メンバー追加フォーム（※ 追加は 5.1.1 に詳細記載）

---

### ■ 表示項目

| 項目名 | 説明 |
|--------|------|
| login_id | メンバーのログインID |
| role | 権限（owner / member） |

---

### ■ エラー処理

| 状況 | 表示内容 |
|------|--------|
| 取得失敗 | `メンバー一覧の取得に失敗しました。` |
| 権限なし | `アクセス権限がありません。` |

---

## 5.1.1 メンバー追加

### ■ 画面構成
- login_id 入力欄  
- 権限選択（owner / member）  
- 追加ボタン  

---

### ■ 入力項目

| 項目名 | 必須 | 説明 |
|--------|------|------|
| login_id | ○ | 追加したいユーザーの login_id |
| role | ○ | 権限（owner / member） |

---

### ■ エラー処理（追加）

| 状況 | 表示内容 |
|------|--------|
| 未入力 | `login_id は必須です。` |
| ユーザー未存在 | `指定された login_id のユーザーが見つかりません。` |
| 既存メンバー | `このユーザーは既にワークスペースのメンバーです。` |
| 権限なし | `オーナーのみメンバーを追加できます。` |
| 追加失敗 | `メンバーの追加に失敗しました。` |

---

## 5.1.2 メンバー削除

### ■ 操作仕様
- 各メンバー右側の「×」ボタンをクリック  
- ただし **オーナーには削除ボタン（×）を表示しない**  
- 「×」クリックで確認ダイアログを表示  
  - 表示文：`このメンバーを削除しますか？`  
- OK 押下で削除 API 呼び出し  
  - `DELETE /workspaces/:workspace_id/members/:id`

---

### ■ 削除時エラー処理

| 状況 | 表示内容 |
|------|--------|
| 権限なし | `オーナーのみメンバーを削除できます。` |
| 削除対象が存在しない | `指定されたメンバーが見つかりません。` |
| 削除失敗 | `メンバーの削除に失敗しました。` |

---

## 5.2 タスク一覧エリア

### ■ 画面構成
- タスク一覧表示  
- タスククリックで詳細画面へ遷移  

---

### ■ 表示項目

| 項目名 | 説明 |
|--------|------|
| title | タスクタイトル |
| status | タスクステータス |
| assignee | 担当者 |
| category | カテゴリ |

---

### ■ エラー処理

| 状況 | 表示内容 |
|------|--------|
| タスク取得失敗 | `タスク一覧の取得に失敗しました。` |
| 未認証 | ログイン画面に遷移 |

---

## 5.3 タスクフィルターエリア

### ■ 画面構成
- ステータス選択  
- 担当者選択  
- カテゴリ入力  
- 絞り込みボタン  
- クリアボタン  

---

### ■ 入力項目

| 項目名 | 必須 | 説明 |
|-------------|------|------|
| status | × | ステータス絞り込み |
| assignee_id | × | 担当者絞り込み |
| category | × | カテゴリ名 |

---

## 5.4 タスク進捗表示エリア

### ■ 画面構成
- 担当者ごとの進捗バー表示  
- 進捗率（％）テキスト表示  
- 最終集計時刻の表示  

---

### ■ 表示項目

| 項目名 | 説明 |
|--------|------|
| login_id | 担当ユーザーのログインID |
| total_tasks | 該当ユーザーの総タスク数 |
| completed_tasks | 該当ユーザーの完了タスク数 |
| completion_rate | 完了率（%） |
| aggregated_at | 最終集計日時 |

---

### ■ エラー処理

| 状況 | 表示内容 |
|------|--------|
| 進捗取得失敗 | `タスク進捗の取得に失敗しました。` |
| 未認証 | ログイン画面に遷移 |
| 権限なし | `アクセス権限がありません。` |

---

## 6. タスク詳細・編集画面

### ■ 画面構成
- パンくず：`タスク`  
- タスク編集フォーム  
  - タイトル入力  
  - 説明入力  
  - ステータス選択（未着手 / 進行中 / 完了）  
  - カテゴリ入力  
  - 担当者選択  
- 更新ボタン  
- 削除ボタン（確認ダイアログあり）  
- 戻るボタン（ワークスペース詳細へ戻る）  

---

### ■ 入力項目

| 項目名      | 必須 | 説明 |
|-------------|------|------|
| title       | ○ | タスクタイトル |
| description | × | タスクの詳細説明 |
| status      | × | タスクの状態 |
| category    | × | カテゴリ名 |
| assignee_id | × | 担当者のユーザーID |

---

### ■ エラー処理

| 状況 | 表示内容 |
|------|--------|
| タスク取得 404 | `タスクが見つかりませんでした。` |
| タスク取得失敗 | `タスクの取得に失敗しました。` |
| title 未入力 | `タスクタイトルは必須です。` |
| 更新失敗 | `タスクの更新に失敗しました。` |
| 削除失敗 | `タスクの削除に失敗しました。` |
| 未認証 | ログイン画面に遷移 |

